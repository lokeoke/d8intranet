'use strict';/** * @ngdoc function * @name d8intranetApp.controller:MainCtrl * @description * # MainCtrl * Controller of the d8intranetApp */angular.module('d8intranetApp')    .controller('petitionsController', function ($scope, $http, $interval, $routeParams, $rootScope, getPetitions, config) {      getPetitions.getPetitions(config.petitionsListUrl).then(function (data) {        // Show content when data is loaded        $rootScope.dataLoaded = true;        // Path petition list to view        $rootScope.petitionsList = data;      });    })    .controller('petitionFormController', function ($scope, $rootScope, $http, config, modalWindow, getPetitions) {      $scope.sendPetition = function () {        var petitionObj = {          "title": $scope.petitionTitle,          "description": $scope.petitionBody        };        var petition = $http.post(config.petitionsPostUrl, petitionObj);        petition.success(function (data) {          modalWindow.setMessage(              'success',              'Petition',              data.message          );          getPetitions.getPetitions(config.petitionsListUrl).then(function (data) {            // Path petition list to view            $rootScope.petitionsList = data;            angular.element(document.getElementsByClassName('add-petition')).removeClass('remove-petition-button');            angular.element(document.getElementById('petitionForm')).find('#formPetition').remove();          });        });        petition.error(function (data) {          modalWindow.setMessage(              'error',              'Petition',              data.message          );        })      }    })    .controller('singlePetitionsController', function ($scope, $cookies, $rootScope, $http, $routeParams, getPetitions, modalWindow, config) {      $scope.nid = $routeParams.nid;      function getPetitionsList() {        getPetitions.getPetitions(config.petitionsListUrl +'/'+ $scope.nid).then(function (data) {          // Show content when data is loaded          $rootScope.dataLoaded = true;          // Parse data from JSON into view          $scope.petition = data;          $scope.petitionTitle = $scope.petition[0].title;          $scope.petitionBody = $scope.petition[0].body;          $scope.petitionId = $scope.petition[0].nid;          $scope.petitionLikes = $scope.petition[0].field_likes;        });      }      getPetitionsList();      $scope.updateLikesFn = function () {        getPetitionsList();      }    });