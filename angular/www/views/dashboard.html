<div class="page-container dashboard">
  <h1 class="page-title">Dashboard</h1>

  <div class="page-content" ng-controller="dashboardController">

    <article class="checked-in-users-list" ng-cloak>
      <h2>Check in
        <span class="refresh-list">
          <span class="refresh-title">Refresh list</span>
            <button update-status class="update-checkin font-icon icon-arrows-cw"></button>
          </span>
      </h2>

      <span class="no-logged-users" ng-if="checkedInUserList.length == 0">
        There are no logged users yet
      </span>
      <ul ng-if="checkedInUserList.length != 0">
        <li ng-repeat="user in checkedInUserList" class="checked-user">
          <span class="user-pic">
          <img ng-src="{{user.field_image}}"
               err-SRC="images/anonymus.png"
               alt="{{user.field_first_name}} {{user.field_last_name}}"
               title="{{user.field_first_name}} {{user.field_last_name}}"/>
          </span>
            <span class="check-in-time">
              {{user.time * 1000 | date:'h:mma'}}
            </span>
        </li>
      </ul>
    </article>

    <article class="boxes-wrapper group">

      <h2>Absent employees</h2>
      <div class="info-box" ng-repeat="(key, user) in states">
        <div class="info-box-headline">
          <div class="counter">
            {{user.count + ' employee' | plural }}
          </div>
          <h1>{{key}}</h1>
        </div>

        <div class="employee-columns">
          <div class="employee" ng-repeat="(employee_key, employee) in user "
               ng-if='employee_key != "count"'>
            <a href="#user/{{employee.uid[0].value}}" class="employee-link">
              <span class="flipper-container">
                <span class="flipper">
                  <span class="front">
                    <span class="user-pic">
                      <img ng-src="{{employee.user_picture[0].url}}"
                           err-SRC="images/anonymus.png"
                           alt="{{employee.field_first_name[0].value}} {{employee.field_last_name[0].value}}"/>
                    </span>
                  </span>
                  <span class="back">
                  </span>
                  </span>
                </span>

              <span class="user-name-date">
                <span class="user-name">
                  {{employee.field_first_name[0].value}} {{employee.field_last_name[0].value}}
                </span>

                <span class="till-date" ng-if="employee.vacationTillDate">Till: {{employee.vacationTillDate | date:'dd MMM' }}</span>
                <span class="till-date" ng-if="employee.tripTillDate">Till: {{employee.tripTillDate | date:'dd MMM' }}</span>
              </span>


            </a>
          </div>
        </div>
      </div>
    </article>

    <article class="available-users"
             ng-repeat="(key, availableUser) in availableEmployees">

      <h2>{{availableUser.title}}</h2>

      <div class="av-users-count">
        {{availableUser.count + ' employee' | plural }}
      </div>

      <div class="av-user"
           ng-repeat="(avEmployee_key, avEmployee) in availableUser"
           ng-if='avEmployee_key != "count" && avEmployee_key != "title"'>

        <a href="#user/{{avEmployee.uid[0].value}}" class="employee-link">

                  <span class="user-pic">
                    <img ng-src="{{avEmployee.user_picture[0].url}}"
                         err-SRC="images/anonymus.png"
                         alt="{{avEmployee.field_first_name[0].value}} {{avEmployee.field_last_name[0].value}}"
                        />

                  </span>
            <span class="user-name">
              {{avEmployee.field_first_name[0].value}} {{avEmployee.field_last_name[0].value}}
            </span>

        </a>

      </div>
    </article>
  </div>
</div>